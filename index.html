<style>
code {
    font-size: 18px;
}
</style>

<script>
    document.addEventListener("keyup", function(event) {
      // Number 13 is the "Enter" key on the keyboard
      if (event.keyCode === 13) {
        event.preventDefault();
        calculate()
      }
    });

    function gcd(a, b) {
          if (b < 0.0000001) return a; 
          return gcd(b, Math.floor(a % b)); 
    };

    function f(a) {
        var whole = Math.trunc(a)
        var fraction = (a - whole).toPrecision(3)
        console.log(fraction)
        var len = fraction.toString().length - 2;
        var denominator = Math.pow(10, len);
        var numerator = fraction * denominator;

        var divisor = gcd(numerator, denominator);

        numerator /= divisor;
        denominator /= divisor;

        var wholer = whole;

        if (fraction === 0) {
            return whole
        }

        if (numerator === 0) {
            return whole
        }
        return whole + " " + Math.floor(numerator) + '/' + Math.floor(denominator);
    }

    function calculate() {
        var w = eval(document.getElementById("wlength").value.replace(/\s/g, '+'))
        var m = eval(document.getElementById("mlength").value.replace(/\s/g, '+'))

        var a = (w - m) / 2
        var b = a + m
        var mid = w / 2
        var rd = "a = " + a + " &nbsp;b = " + b + " &nbsp;m = " + mid
        var rf = "a = " + f(a) + " &nbsp;b = " + f(b) + " &nbsp;m = " + f(mid)
        document.getElementById("result-decimal").innerHTML = rd
        document.getElementById("result-fractional").innerHTML = rf
    }   

    function add(operation) {
        var a = eval(document.getElementById("alength").value.replace(/\s/g, '+'))
        var b = eval(document.getElementById("blength").value.replace(/\s/g, '+'))

        if (operation === 'add')
            var sum = a + b
        else
            var sum = a - b

        var rf = f(sum)
        document.getElementById("result-add-decimal").innerHTML = sum
        document.getElementById("result-add-fractional").innerHTML = rf
    }
</script>
<h1>Middle Calculator</h1>
  <label for="wlength">Whole Length:</label><br>
  <input type="string" id="wlength" name="wlength"><br>
  <label for="mlength">Middle Piece Length:</label><br>
  <input type="string" id="mlength" name="mlength"><br><br>
  <button onClick="calculate()">Calculate</button>
<pre>
    <code>          a  m  b        </code>
    <code>|←       →|← . →|←      →|</code>

    <code>|←      whole length    →|</code>
    <code>          |←mid→|         </code>
</pre>

<h2>Result</h2>
<code id="result-decimal">a = 0 b =  0 m = 0</code><br>
<code id="result-fractional">a = 0 b =  0 m = 0</code>
<hr></hr>
<h1>Adder</h1>
  <label for="alength">Length A:</label><br>
  <input type="string" id="alength" name="alength"><br>
  <label for="blength">Length B:</label><br>
  <input type="string" id="blength" name="blength"><br><br>
  <button onClick="add('add')">Add</button>
  <button onClick="add()">Subtract</button>

<h2>Result</h2>
<code id="result-add-decimal">0</code><br>
<code id="result-add-fractional">0</code>